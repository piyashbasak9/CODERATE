{% extends 'base.html' %}
{% block content %}
<h1 class="title">Users</h1>
{% if users_data %}
  <div class="columns is-multiline">
    {% for item in users_data %}
      <div class="column is-one-third">
        <div class="box">
          <div class="media">
            <div class="media-left">
              {% if item.profile.profile_picture %}
                <figure class="image is-64x64">
                  <img src="{{ item.profile.profile_picture.url }}" alt="{{ item.user.username }}">
                </figure>
              {% else %}
                <figure class="image is-64x64">
                  <img src="https://via.placeholder.com/64" alt="{{ item.user.username }}">
                </figure>
              {% endif %}
            </div>
            <div class="media-content">
              <p class="title is-5"><a href="{% url 'profile' item.user.username %}">{{ item.user.username }}</a></p>
              <p class="subtitle is-6">CF Max Rating: {{ item.profile.max_rating|default:'-' }}</p>
              <p>
                {% if item.stars > 0 %}
                  <strong>Contributor:</strong>
                  {% for i in "12345"|slice:":item.stars" %}â˜…{% endfor %}
                  ({{ item.contrib_count }})
                {% else %}
                  <strong>Contributor:</strong>  ({{ item.contrib_count }})
                {% endif %}
              </p>
              <p style="margin-top:8px">
                {% if item.profile.codeforces_handle %}
                  <a class="button is-small is-link" href="https://codeforces.com/profile/{{ item.profile.codeforces_handle }}" target="_blank" rel="noopener noreferrer">View Codeforces</a>
                {% else %}
                  <a class="button is-small is-light" disabled>View Codeforces</a>
                {% endif %}
                <a class="button is-small" href="{% url 'profile' item.user.username %}">View Profile</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No users</p>
{% endif %}
{% endblock %}